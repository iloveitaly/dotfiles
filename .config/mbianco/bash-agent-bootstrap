# bash-agent-bootstrap
# This file is loaded by BASH_ENV for non-interactive bash shells in the agent environment.

# Load shared agent logic (path, detection function)
# shellcheck source=./agent-bootstrap
source "${HOME}/.config/mbianco/agent-bootstrap"

# If an agent is running the terminal, load agent config
if ai_is_agent_terminal; then
  # in the case of a bash terminal, mise + direnv should be setup already
  # so all we really need to do is REMOVE stuff that was loaded because we thought it was an interactive shell

  unset PAGER

  # without this, the git config which uses fancy pagers, etc will be used
  export GIT_CONFIG_NOSYSTEM=1
  export GIT_CONFIG_GLOBAL=/dev/null
  export GIT_PAGER=""

  # Simple prompt for bash if it happens to be interactive (though BASH_ENV is mostly for non-interactive)
  if [[ $- == *i* ]]; then
      PS1='\w $ '
  fi

  export AGENT_CONFIGURED=1
fi
